from util.painter import Painter
from robot_model import RobotModel
from robot_client_server.read_state_parser import ReadStateParser
from robot_client_server.robot_clients import RealRobotClient
from center_of_mass import compute_center_of_mass_from_read_state_string


def draw_robot_with_center_of_mass(robot_name=None, read_state_string=None):

    assert robot_name is not None or read_state_string is not None

    if read_state_string is None:
        read_state_string = RealRobotClient().read_state()
    assert 'nan' not in read_state_string

    angles = ReadStateParser(read_state_string).get_all_joint_radians()

    painter = Painter(azimuth=0, elevation=0)
    robot_model = RobotModel(painter)

    center_of_mass = compute_center_of_mass_from_read_state_string(angles, painter, robot_model,\
                           draw_robot=True, draw_center_of_mass=True)

    # robot_model.draw_coordinates()  # draw coordinates lastly because we want them on top layer
    robot_model.show()

if __name__ == '__main__':
    # draw_robot_with_center_of_mass(name='Arash')
    # draw_robot_with_center_of_mass(read_state_string="Ok&Arash&LeftShoulderLateral:angle=-0.171713 speed=0 load=0&LeftShoulderFrontal:angle=0.957297 speed=0 load=0&LeftElbowLateral:angle=-0.730082 speed=0 load=0&RightShoulderLateral:angle=0.0767918 speed=0 load=0&RightShoulderFrontal:angle=-1.09057 speed=0 load=0&RightElbowLateral:angle=0.897471 speed=0 load=0&NeckTransversal:angle=1.51567 speed=0 load=0&NeckLateral:angle=0.409666 speed=0 load=0&LeftHipTransversal:angle=0.138151 speed=0 load=0&LeftHipFrontal:angle=-0.029053 speed=0 load=0&LeftHipLateral:angle=-1.52162 speed=0 load=0&LeftKneeLateral:angle=-0.187053 speed=0 load=0&LeftAnkleLateral:angle=-0.253014 speed=0 load=0&LeftAnkleFrontal:angle=-0.025985 speed=0 load=0&RightHipTransversal:angle=0.167297 speed=0 load=0&RightHipFrontal:angle=-0.0152471 speed=0 load=0&RightHipLateral:angle=1.39141 speed=0 load=0&RightKneeLateral:angle=0.265471 speed=0 load=0&RightAnkleLateral:angle=1.6706 speed=0 load=0&RightAnkleFrontal:angle=-0.0152471 speed=0 load=0")
    # draw_robot_with_center_of_mass(read_state_string="Arash&Ok&LeftShoulderLateral:angle=0.504772 speed=0 load=0&LeftShoulderFrontal:angle=1.15671 speed=0 load=0&LeftElbowLateral:angle=-1.61672 speed=0 load=0&RightShoulderLateral:angle=-0.297499 speed=0 load=0&RightShoulderFrontal:angle=-1.31299 speed=0 load=0&RightElbowLateral:angle=1.65986 speed=0 load=0&NeckTransversal:angle=9.27448e-05 speed=0 load=0&NeckLateral:angle=9.27448e-05 speed=0 load=0&LeftHipTransversal:angle=-0.23614 speed=0 load=0&LeftHipFrontal:angle=-0.0336549 speed=0 load=0&LeftHipLateral:angle=-1.44032 speed=0 load=0&LeftKneeLateral:angle=-0.194723 speed=0 load=0&LeftAnkleLateral:angle=-1.64894 speed=0 load=0&LeftAnkleFrontal:angle=-0.00757718 speed=0 load=0&RightHipTransversal:angle=0.627491 speed=0 load=0&RightHipFrontal:angle=-0.0167811 speed=0 load=0&RightHipLateral:angle=1.42209 speed=0 load=0&RightKneeLateral:angle=0.234792 speed=0 load=0&RightAnkleLateral:angle=1.65986 speed=0 load=0&RightAnkleFrontal:angle=-0.0167811 speed=0 load=0")
    # draw_robot_with_center_of_mass(read_state_string="Arash&Ok&LeftShoulderLateral:angle=0.504772 speed=0 load=0&LeftShoulderFrontal:angle=1.15671 speed=0 load=0&LeftElbowLateral:angle=-1.61672 speed=0 load=0&RightShoulderLateral:angle=-0.297499 speed=0 load=0&RightShoulderFrontal:angle=-1.31299 speed=0 load=0&RightElbowLateral:angle=1.65986 speed=0 load=0&NeckTransversal:angle=9.27448e-05 speed=0 load=0&NeckLateral:angle=9.27448e-05 speed=0 load=0&LeftHipTransversal:angle=-0.23614 speed=0 load=0&LeftHipFrontal:angle=-0.0336549 speed=0 load=0&LeftHipLateral:angle=0 speed=0 load=0&LeftKneeLateral:angle=-0.194723 speed=0 load=0&LeftAnkleLateral:angle=-1.64894 speed=0 load=0&LeftAnkleFrontal:angle=-0.00757718 speed=0 load=0&RightHipTransversal:angle=0.627491 speed=0 load=0&RightHipFrontal:angle=-0.0167811 speed=0 load=0&RightHipLateral:angle=0 speed=0 load=0&RightKneeLateral:angle=0.234792 speed=0 load=0&RightAnkleLateral:angle=1.65986 speed=0 load=0&RightAnkleFrontal:angle=-0.0167811 speed=0 load=0")
    draw_robot_with_center_of_mass(read_state_string="Arash&Ok&LeftShoulderLateral:angle=0.504772 speed=0 load=0&LeftShoulderFrontal:angle=1.15671 speed=0 load=0&LeftElbowLateral:angle=-1.61672 speed=0 load=0&RightShoulderLateral:angle=-0.297499 speed=0 load=0&RightShoulderFrontal:angle=-1.31299 speed=0 load=0&RightElbowLateral:angle=1.65986 speed=0 load=0&NeckTransversal:angle=9.27448e-05 speed=0 load=0&NeckLateral:angle=9.27448e-05 speed=0 load=0&LeftHipTransversal:angle=-0.23614 speed=0 load=0&LeftHipFrontal:angle=-0.0336549 speed=0 load=0&LeftHipLateral:angle=0 speed=0 load=0&LeftKneeLateral:angle=-0.194723 speed=0 load=0&LeftAnkleLateral:angle=0 speed=0 load=0&LeftAnkleFrontal:angle=-0.00757718 speed=0 load=0&RightHipTransversal:angle=0.627491 speed=0 load=0&RightHipFrontal:angle=-0.0167811 speed=0 load=0&RightHipLateral:angle=-1.42209 speed=0 load=0&RightKneeLateral:angle=0.234792 speed=0 load=0&RightAnkleLateral:angle=1.65986 speed=0 load=0&RightAnkleFrontal:angle=-0.0167811 speed=0 load=0")
    # draw_robot_with_center_of_mass(read_state_string="Arash&Ok&LeftShoulderLateral:angle=0.504772 speed=0 load=0&LeftShoulderFrontal:angle=1.15671 speed=0 load=0&LeftElbowLateral:angle=-1.61672 speed=0 load=0&RightShoulderLateral:angle=-0.297499 speed=0 load=0&RightShoulderFrontal:angle=-1.31299 speed=0 load=0&RightElbowLateral:angle=1.65986 speed=0 load=0&NeckTransversal:angle=9.27448e-05 speed=0 load=0&NeckLateral:angle=9.27448e-05 speed=0 load=0&LeftHipTransversal:angle=-0.23614 speed=0 load=0&LeftHipFrontal:angle=-0.0336549 speed=0 load=0&LeftHipLateral:angle=3.144032 speed=0 load=0&LeftKneeLateral:angle=-0.194723 speed=0 load=0&LeftAnkleLateral:angle=-1.64894 speed=0 load=0&LeftAnkleFrontal:angle=-0.00757718 speed=0 load=0&RightHipTransversal:angle=0.627491 speed=0 load=0&RightHipFrontal:angle=-0.0167811 speed=0 load=0&RightHipLateral:angle=-3.142209 speed=0 load=0&RightKneeLateral:angle=0.234792 speed=0 load=0&RightAnkleLateral:angle=1.65986 speed=0 load=0&RightAnkleFrontal:angle=-0.0167811 speed=0 load=0")
    # draw_robot_with_center_of_mass(read_state_string="Arash&Ok&LeftShoulderLateral:angle=0.504772 speed=0 load=0&LeftShoulderFrontal:angle=1.15671 speed=0 load=0&LeftElbowLateral:angle=-1.61672 speed=0 load=0&RightShoulderLateral:angle=-0.297499 speed=0 load=0&RightShoulderFrontal:angle=-1.31299 speed=0 load=0&RightElbowLateral:angle=1.65986 speed=0 load=0&NeckTransversal:angle=9.27448e-05 speed=0 load=0&NeckLateral:angle=9.27448e-05 speed=0 load=0&LeftHipTransversal:angle=-0.23614 speed=0 load=0&LeftHipFrontal:angle=-1.5 speed=0 load=0&LeftHipLateral:angle=3.144032 speed=0 load=0&LeftKneeLateral:angle=-0.194723 speed=0 load=0&LeftAnkleLateral:angle=-1.64894 speed=0 load=0&LeftAnkleFrontal:angle=-0.00757718 speed=0 load=0&RightHipTransversal:angle=0.627491 speed=0 load=0&RightHipFrontal:angle=-1.5 speed=0 load=0&RightHipLateral:angle=-3.142209 speed=0 load=0&RightKneeLateral:angle=0.234792 speed=0 load=0&RightAnkleLateral:angle=1.65986 speed=0 load=0&RightAnkleFrontal:angle=-0.0167811 speed=0 load=0")